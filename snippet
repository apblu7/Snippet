# Step 4. Backup current WAR file

echo "[STEP 4] Backing up WAR file..."

TIMESTAMP=$(date +"%Y%m%d-%H%M%S")
BACKUP_DIR="${REMOTE_BACKUP_PATH}/${TIMESTAMP}-${PROJECT_NAME}"

mkdir -p "$BACKUP_DIR"
if [ $? -ne 0 ]; then
  echo "[ERROR] Failed to create backup directory: $BACKUP_DIR"
  exit 1
fi

cp "$WAR_PATH" "$BACKUP_DIR/"
if [ $? -ne 0 ]; then
  echo "[ERROR] Failed to copy WAR file to backup directory"
  exit 1
fi

echo "[INFO] WAR file backed up to: $BACKUP_DIR"